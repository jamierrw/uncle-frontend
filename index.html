<!DOCTYPE html>
<html>
  <head>
    <title>Uncle</title>
    <meta charset="UTF-8" />
  </head>
  <body style="font-family: sans-serif; padding: 30px; max-width: 600px; margin: auto;">
  <h1 style="text-align: center;">Ask Uncle</h1>

  <div id="chat" style="border: 1px solid #ccc; padding: 20px; height: 400px; overflow-y: auto; margin-bottom: 20px;">
    <!-- Chat messages will go here -->
  </div>

  <form id="chatForm" style="display: flex; gap: 10px;">
    <input type="text" id="question" placeholder="Ask a question..." style="flex: 1; padding: 10px;" />
    <button type="submit" style="padding: 10px;">Ask</button>
  </form>

  <script>
    const form = document.getElementById('chatForm');
    const chat = document.getElementById('chat');

    form.onsubmit = async (e) => {
      e.preventDefault();
      const input = document.getElementById('question');
      const question = input.value.trim();
      if (!question) return;

      // Show user's question
      const userMsg = document.createElement('p');
      userMsg.innerHTML = `<strong>You:</strong> ${question}`;
      chat.appendChild(userMsg);

      // Clear input
      input.value = '';

      // Show temporary "Thinkingâ€¦" message
const thinkingMsg = document.createElement('p');
thinkingMsg.innerHTML = `<em>Uncle is thinkingâ€¦</em>`;
thinkingMsg.id = 'thinking';
chat.appendChild(thinkingMsg);
chat.scrollTop = chat.scrollHeight;

try {
  const response = await fetch("https://uncle-backend.onrender.com/ask", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ question })
  });

  const data = await response.json();

  // Remove the "Thinkingâ€¦" message
  thinkingMsg.remove();

  // Show Uncle's reply
  const uncleMsg = document.createElement('p');
  uncleMsg.innerHTML = `<strong>Uncle:</strong> ${data.reply}`;
  chat.appendChild(uncleMsg);
  chat.scrollTop = chat.scrollHeight;

} catch (err) {
  thinkingMsg.innerHTML = `<em>Error: Uncle encountered a problem ðŸ˜¢</em>`;
}

    };
  </script>
</body>
</html>
